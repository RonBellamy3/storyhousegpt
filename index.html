<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryhouseGPT - AI Studio Assistant</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ‚ö° YOUR ANTHROPIC API KEY IS CONFIGURED ‚ö°
        const ANTHROPIC_API_KEY = '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';
        // API Key configured and ready to use!

        function StoryhouseGPT() {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');
            const [loading, setLoading] = useState(false);
            const messagesEndRef = useRef(null);

            const sopContent = `
STORYHOUSE STUDIO - COMPLETE SOP HANDBOOK
Location: 3001 S Lamar Blvd Suite 220, Austin, TX 78704

=== BOOKING PROCESS ===

PLATFORMS WHERE CLIENTS CAN BOOK:
1. Peerspace (Main platform - most bookings)
   - Media Productions: $175/hr
   - Meetings: $249/hr
2. Email: Studio@debutu.co
3. Google Listing
4. Studio Website: www.debutu.co
5. Austin Film Commission Studio Facilities
6. Giggster

INQUIRY RESPONSE TIME:
- Goal: Respond within 1 hour (ideally 10-30 minutes)
- This keeps Peerspace rating high and affects algorithm visibility
- After hours response template: "Hello and thank you for reaching out! I'm the studio assistant, and am forwarding this to the studio manager's attention asap. We are excited to host you, and will reply to your message as soon as possible."

BOOKING RATES:
- Peerspace Media Productions: $175/hr
- Peerspace Events: $249/hr (events = alcoholic beverages, catering, or speakers present)
- Direct Media Productions: $150/hr
- Direct Events: $234/hr
- Minimum rental: 3 hours
- Overtime on platform: $175/hr, off platform: $150/hr

=== STUDIO SPECIFICATIONS ===

SIZE: 1,200 sq ft
CAPACITY: 49 people

INCLUDED WITH EVERY BOOKING (NO EXTRA CHARGE):
- (3) Basic Nanlite lights package
- 75 inch Samsung Frame TV
- Vestaboard
- WiFi, Fridge, Microwave, Coffee Machine
- Sink, Filtered Water (hot/cold)
- Complimentary Tea bags

FULL LIGHTING PACKAGE INVENTORY (Available as add-on):
Continuous Lighting Package: $450 flat fee + Comes with grip cart

- (4) Nanlite Forza 60B II (Bi-Color) 2700k-6500k
- (1) Nanlite Forza 300B II (Bi-Color) 2700k-6500k
- (2) Nanlite Forza 500B II (Bi-Color) 2700k-6500k
- (4) 4ft Quasar RGB lights
- (2) ~4ft Nanlite Softboxes (Parabolic 120)
- (2) ~2ft Nanlite Softboxes (60 FMM)
- Fresnels with barn doors
- 4x4 black flag

GRIP CART INVENTORY:
- (3) Combo Stands
- C-Stands (various sizes)
- Baby Stands, Arri stands
- Safety cables, clamps, sandbags
- Extension cords (15ft and 50ft)

=== STUDIO ACCESS & SECURITY ===

HOURS: 8am-9pm

DOOR ACCESS:
- Building locked before 8am and after 6pm M-F
- Locked all hours on weekends
- Exterior key card needed (pick up day before, leave on table by sink)
- Suite door code in rental guide
- To unlock suite for day: 33288 A4A
- To lock suite: 33288 A5A

PARKING: Both sides of building, freight elevator available

SECURITY:
- Non-emergency: 512-888-1354 (Corners 1 office building)
- Emergency: 911

=== ADD-ON SERVICES ===

SPACE MODIFICATIONS:
- Smoked Glass/Frosted Windows: $200 flat fee
- Leadership Office: $50/hr (owner's discretion)

STAFFING:
- Field Producer: $100/hr
- Photographer: $150/hr
- Director of Photography: $150/hr
- Professional Videographer: $100/hr
- BTS Photography: $150/hr
- Teleprompter Operator Full Day: $750
- Teleprompter Operator Half Day: $450

PRODUCTION EQUIPMENT:
- 19" Teleprompter w/ Miller Tripod: $50/hr (3hr min)
- EyeDirect - Folding Mark E: $100/item (3hr min)
- Miller Tripod: $50 flat
- Sony A7siii Camera w/ lens + tripod: $50/hr
- Sony FX9 Camera w/ lens: $750/hr
- Small Grip Kit: $100 flat
- Continuous Lighting Package: $450 flat + grip cart

OFFICE SUPPLIES:
- Vibe Board: $60/hr
- Wooden Chalkboard: $30/hr

OTHER:
- Overnight Equipment Storage: $500 flat
- Overnight Beverage Storage: $100 flat

=== TRAINED STUDIO PAs ===

Frankie Chamberlain
- Phone: (228) 369-0233
- Email: Frankie_frank@live.com
- Last Training: 11/3/2025

Stephanie Ward-Harvey
- Phone: (425) 524-9728
- Email: Stephaniewardharvey@pm.me
- Last Training: 11/3/2025

Josh Jones
- Phone: (662) 315-5315
- Email: Triplej0612@gmail.com
- Last Training: 11/3/2025

Clay Maxwell
- Phone: (512) 596-6962
- Email: Claymaxwell@outlook.com
- Last Training: 11/3/2025

Aaron Sowells
- Phone: (713) 689-4524
- Email: Arod2009@outlook.com
- Last Training: 11/3/2025

BACKUP PAs:
Nathaniel Christ
- Phone: (323) 684-9285
- Email: Nathaniel@circuspicnic.com

Kelly Greenheart
- Phone: (512) 576-2345
- Email: Kelly@circuspicnic.com

=== PROPERTY MANAGEMENT ===

Melissa Beatty (Senior Property Manager - Danly Properties)
- Phone: (512) 219-7717 or (512) 219-9551
- Email: mbeatty@danlyproperties.com
- Main point of contact

Allen Newman (Project Manager - Danly Properties)
- Phone: (512) 871-9672
- Email: anewman@danlyproperties.com
- Building maintenance

Evelyn Tavernier (President - Express Commercial Cleaning)
- Phone: (512) 919-4333
- Email: info@expresscommercialcleaning.com

=== CLIENT CHECK-IN ===

PRE-GUEST SETUP:
1. Set AC to 70-72¬∞F (Auto fan, both lobby and studio)
2. Start AC early on hot days
3. Open Equipment/Prop Room, check inventory
4. Clean hair/makeup table
5. Stock snacks (only if <10 people)
6. Move studio food to reserved fridge section (if 10+ people)
7. Clean tables and floors
8. Preset special requests

WELCOME:
- Custom Vestaboard message (include IG handle)
- Unlock suite if high traffic (33288 A4A)
- Have building access card ready

TOUR HIGHLIGHTS:
- Bathroom location and code
- Router reset location
- Request furniture photos before moving
- Don't place equipment on nice furniture
- Exterior door alarm info
- Both thermostat locations
- iPad Kasa app for lights
- Samsung Frame TV screen mirroring
- End time expectations

=== CLIENT CHECK-OUT ===

CLIENT TASKS:
1. Set thermostats to 74¬∞F Auto Fan
2. Close curtains on both walls
3. Turn off lights (except hallway to back office)
4. Return furniture to default
5. Start Roomba (prop doors with sandbags)
6. Bag trash, leave in hallway
7. Dispose large trash in dumpsters (NW side near Half Priced Books)
8. Leave access card on table by sink
9. Lock equipment/HMU room if used
10. Clean fridge of leftovers

INTERNAL TASKS:
- Leverage crew for larger resets
- Detailed scan for left items
- Confirm thermostat at 74¬∞F
- Confirm curtains closed
- Check all gear accounted for
- Replenish craft services
- Basic cleaning
- Set Roomba (clear floor)
- Check restrooms
- Re-lock suite: 33288 A5A

=== DAILY MAINTENANCE ===

RING CAMERA:
- Lasts ~1 month per charge
- Notifications at 20%
- Use orange tool to remove
- See video guide for reinstall

CRAFT SERVICES:
- Refill weekly from backstock
- Monthly Costco run: Keurig pods, sparkling water, snacks

CLEANING:
Daily (M-F) - Building Janitorial:
- Empty trash
- Wipe kitchenette
- Clean door glass
- Sanitize handles/keypad

Weekly: Vacuum/sweep, wipe desktops
Monthly: Dust blinds
Special: Deep cleans by Express CC

=== POST-RENTAL (Within 72 Hours) ===

1. Update overtime/add-ons on Peerspace via confirmation email
2. Request reviews: "Thanks for choosing Storyhouse Studio! If you have feedback, we'd love to hear it. If you're open to a 5-star review, we'd be incredibly grateful."
3. Add to CRM: email/phone/IG to VidLead
4. Request permission for marketing use

=== STUDIO RULES ===

- No loud music or yelling
- Food/drink allowed (clean up after)
- Complete checkout list before leaving
- Photo furniture before moving
- Don't place equipment on nice furniture

=== PAYMENT & CANCELLATION ===

PAYMENT: Via Peerspace or direct invoicing
CANCELLATION:
- Off Platform: 50% refund within 7 days, 100% beyond 7 days
- On Platform: Per Peerspace terms
`;

            useEffect(() => {
                setMessages([{
                    role: 'assistant',
                    content: 'üëã Hi! I\'m StoryhouseGPT, your AI assistant for all studio procedures. I can answer questions about:\n\n‚Ä¢ Booking procedures & rates\n‚Ä¢ Studio access & security\n‚Ä¢ Equipment & inventory\n‚Ä¢ Check-in/check-out procedures\n‚Ä¢ Add-on services & pricing\n‚Ä¢ Daily maintenance tasks\n‚Ä¢ Contact information\n‚Ä¢ And much more!\n\nWhat would you like to know?',
                    timestamp: new Date()
                }]);
            }, []);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);

            const findRelevantInfo = (query) => {
                const queryLower = query.toLowerCase();
                const keywords = queryLower.split(' ').filter(w => w.length > 2);
                
                if (queryLower.includes('pa') || queryLower.includes('production assistant')) {
                    return sopContent;
                }
                
                if (queryLower.includes('light') || queryLower.includes('equipment') || queryLower.includes('included')) {
                    return sopContent;
                }
                
                if (queryLower.includes('contact') || queryLower.includes('phone') || queryLower.includes('email')) {
                    return sopContent;
                }
                
                const sections = sopContent.split('===');
                const relevantSections = sections.filter(section => {
                    const sectionLower = section.toLowerCase();
                    return keywords.some(keyword => sectionLower.includes(keyword));
                });

                return relevantSections.length > 0 ? relevantSections.join('\n\n---\n\n') : sopContent;
            };

            const generateResponse = async (query) => {
                // Check if API key is set
                if (!ANTHROPIC_API_KEY || ANTHROPIC_API_KEY === 'YOUR_API_KEY_HERE') {
                    return `‚ö†Ô∏è **API Key Not Configured**
                    
Please add your Anthropic API key to use AI responses.

1. Go to: https://console.anthropic.com/
2. Get your API key (starts with sk-ant-...)
3. Edit the HTML file and replace 'YOUR_API_KEY_HERE' with your actual key
4. Re-upload to GitHub

For now, I can still help with basic questions using keyword matching. What would you like to know?`;
                }

                const relevantInfo = findRelevantInfo(query);
                
                const systemPrompt = `You are StoryhouseGPT, a friendly and helpful AI assistant for Storyhouse Studio in Austin, TX. 

YOUR PERSONALITY:
- Conversational and warm, like a knowledgeable team member
- Concise but thorough
- Ask follow-up questions when helpful
- Use natural language, not robotic responses

YOUR INSTRUCTIONS:
1. Answer questions ONLY based on the SOP information provided below
2. When a question could have multiple interpretations, provide ALL relevant answers organized clearly
3. End responses with a helpful follow-up question when appropriate
4. Format with headers, bullets, and bold text for readability
5. If information isn't in the SOPs, say: "I don't have that specific information in our SOPs. Let me connect you with [relevant person/department]."

SOP INFORMATION:
${relevantInfo}

USER QUESTION: ${query}

Provide a helpful, accurate answer based only on the SOP information above:`;

                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'x-api-key': ANTHROPIC_API_KEY,
                            'anthropic-version': '2023-06-01'
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 1024,
                            messages: [{ 
                                role: 'user', 
                                content: systemPrompt 
                            }]
                        })
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        console.error('API Error:', error);
                        
                        if (response.status === 401) {
                            return `‚ö†Ô∏è **Invalid API Key**
                            
Your API key appears to be incorrect or expired.

Please check:
1. The key starts with sk-ant-
2. You copied the entire key
3. The key hasn't been deleted from Anthropic Console

Get a new key at: https://console.anthropic.com/`;
                        }
                        
                        return `I encountered an error connecting to AI. Please try again. If this persists, check your API key configuration.`;
                    }

                    const data = await response.json();
                    return data.content[0].text;
                    
                } catch (error) {
                    console.error('Error:', error);
                    return `I encountered a connection error. Please check your internet connection and try again.`;
                }
            };

            const handleSend = async () => {
                if (!input.trim() || loading) return;

                const userMessage = {
                    role: 'user',
                    content: input,
                    timestamp: new Date()
                };

                setMessages(prev => [...prev, userMessage]);
                setInput('');
                setLoading(true);

                const answer = await generateResponse(input);

                const assistantMessage = {
                    role: 'assistant',
                    content: answer,
                    timestamp: new Date()
                };

                setMessages(prev => [...prev, assistantMessage]);
                setLoading(false);
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSend();
                }
            };

            const quickQuestions = [
                "What are the booking rates?",
                "How do I check in clients?",
                "What add-on services are available?",
                "What's the check-out procedure?",
                "Who are the studio PAs?",
                "What are the daily maintenance tasks?"
            ];

            const Book = () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
            );

            const Send = () => (
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            );

            const Info = () => (
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
            );

            const Sparkles = () => (
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"></path>
                </svg>
            );

            return (
                <div className="flex flex-col h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">
                    <div className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg">
                        <div className="max-w-5xl mx-auto px-6 py-6">
                            <div className="flex items-center gap-4">
                                <div className="bg-white/20 backdrop-blur-sm p-3 rounded-xl">
                                    <Book />
                                </div>
                                <div>
                                    <h1 className="text-2xl font-bold">StoryhouseGPT</h1>
                                    <p className="text-indigo-100 text-sm">AI Studio Assistant ‚Ä¢ Always Up-to-Date</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="bg-indigo-50 border-b border-indigo-200">
                        <div className="max-w-5xl mx-auto px-6 py-3 flex items-start gap-3">
                            <Info />
                            <div className="text-sm text-indigo-900">
                                <span className="font-semibold">üìç 3001 S Lamar Blvd Suite 220, Austin, TX</span>
                                <span className="mx-2">‚Ä¢</span>
                                <span>1,200 sq ft studio</span>
                                <span className="mx-2">‚Ä¢</span>
                                <span>49 person capacity</span>
                            </div>
                        </div>
                    </div>

                    <div className="flex-1 overflow-y-auto">
                        <div className="max-w-5xl mx-auto px-6 py-8 space-y-6">
                            {messages.map((msg, idx) => (
                                <div key={idx} className={`flex gap-4 ${msg.role === 'user' ? 'flex-row-reverse' : ''}`}>
                                    <div className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${
                                        msg.role === 'user' 
                                            ? 'bg-gradient-to-br from-indigo-500 to-purple-500 text-white' 
                                            : 'bg-gradient-to-br from-emerald-400 to-teal-500 text-white'
                                    }`}>
                                        {msg.role === 'user' ? 'üë§' : 'ü§ñ'}
                                    </div>
                                    <div className={`flex-1 max-w-3xl ${msg.role === 'user' ? 'text-right' : ''}`}>
                                        <div className={`inline-block rounded-2xl px-6 py-4 shadow-md ${
                                            msg.role === 'user'
                                                ? 'bg-gradient-to-br from-indigo-500 to-purple-500 text-white'
                                                : 'bg-white border border-gray-200'
                                        }`}>
                                            <div style={{ whiteSpace: 'pre-wrap' }}>
                                                {msg.content.split('\n').map((line, i) => {
                                                    const parts = line.split(/(\*\*.*?\*\*)/g);
                                                    return (
                                                        <p key={i} className="mb-2 last:mb-0">
                                                            {parts.map((part, j) => {
                                                                if (part.startsWith('**') && part.endsWith('**')) {
                                                                    return <strong key={j}>{part.slice(2, -2)}</strong>;
                                                                }
                                                                return part;
                                                            })}
                                                        </p>
                                                    );
                                                })}
                                            </div>
                                            <div className={`text-xs mt-2 ${msg.role === 'user' ? 'text-indigo-100' : 'text-gray-400'}`}>
                                                {msg.timestamp.toLocaleTimeString()}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}

                            {loading && (
                                <div className="flex gap-4">
                                    <div className="w-10 h-10 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center text-white">
                                        ü§ñ
                                    </div>
                                    <div className="bg-white rounded-2xl px-6 py-4 shadow-md border border-gray-200">
                                        <div className="flex items-center gap-2">
                                            <Sparkles />
                                            <span className="text-gray-600">Searching SOPs...</span>
                                        </div>
                                    </div>
                                </div>
                            )}

                            <div ref={messagesEndRef} />
                        </div>
                    </div>

                    <div className="bg-gray-50 border-t border-gray-200">
                        <div className="max-w-5xl mx-auto px-6 py-4">
                            <p className="text-xs font-semibold text-gray-600 mb-3">üí° Quick Questions:</p>
                            <div className="grid grid-cols-2 md:grid-cols-3 gap-2">
                                {quickQuestions.map((q, i) => (
                                    <button
                                        key={i}
                                        onClick={() => setInput(q)}
                                        className="text-xs text-left bg-white hover:bg-indigo-50 text-gray-700 px-3 py-2 rounded-lg border border-gray-200 transition-all hover:border-indigo-300"
                                    >
                                        {q}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    <div className="bg-white border-t border-gray-200 shadow-lg">
                        <div className="max-w-5xl mx-auto px-6 py-5">
                            <div className="flex gap-3">
                                <textarea
                                    value={input}
                                    onChange={(e) => setInput(e.target.value)}
                                    onKeyPress={handleKeyPress}
                                    placeholder="Ask me anything about Storyhouse Studio procedures..."
                                    className="flex-1 resize-none border-2 border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:border-indigo-500 text-gray-800"
                                    rows="2"
                                    disabled={loading}
                                />
                                <button
                                    onClick={handleSend}
                                    disabled={!input.trim() || loading}
                                    className="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-300 disabled:to-gray-400 text-white px-6 rounded-xl transition-all disabled:cursor-not-allowed shadow-md hover:shadow-lg flex items-center justify-center"
                                >
                                    <Send />
                                </button>
                            </div>
                            <p className="text-xs text-gray-500 mt-2">
                                Press Enter to send ‚Ä¢ Shift + Enter for new line
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<StoryhouseGPT />, document.getElementById('root'));
    </script>
</body>
</html>
